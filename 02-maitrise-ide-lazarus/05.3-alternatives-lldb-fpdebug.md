ğŸ” Retour au [Sommaire](/SOMMAIRE.md)

# 2.5.3 Alternatives Ã  GDB (LLDB, FpDebug)

## Introduction : Pourquoi des alternatives Ã  GDB ?

Bien que GDB soit le dÃ©bogueur standard et le plus mature, il n'est pas parfait. Son Ã¢ge (crÃ©Ã© en 1986) apporte stabilitÃ© mais aussi certaines limitations. Les alternatives modernes offrent des avantages spÃ©cifiques :

**Limitations de GDB :**
- ğŸŒ Peut Ãªtre lent sur de gros projets
- ğŸ”§ Configuration parfois complexe
- ğŸ“š ConÃ§u Ã  l'origine pour C/C++, pas Pascal
- ğŸ’¾ Architecture ancienne, difficile Ã  Ã©tendre
- ğŸ–¥ï¸ Interface en ligne de commande native

**Les alternatives principales :**
- **FpDebug** : ConÃ§u spÃ©cifiquement pour FreePascal
- **LLDB** : Moderne, rapide, architecture modulaire
- **Autres** : DÃ©bogueurs commerciaux ou spÃ©cialisÃ©s

## FpDebug : Le dÃ©bogueur natif Pascal

### Qu'est-ce que FpDebug ?

FpDebug est un dÃ©bogueur dÃ©veloppÃ© par l'Ã©quipe FreePascal/Lazarus, conÃ§u dÃ¨s le dÃ©part pour Object Pascal. C'est comme avoir un dÃ©bogueur qui "parle Pascal nativement" plutÃ´t qu'un dÃ©bogueur C++ qui essaie de comprendre Pascal.

**Avantages majeurs :**
- ğŸš€ **2 Ã  5x plus rapide** que GDB
- ğŸ¯ **Comprend les types Pascal** nativement
- ğŸ“¦ **IntÃ©grÃ© dans Lazarus** (pas d'installation sÃ©parÃ©e)
- ğŸ”§ **Configuration minimale**
- ğŸ’¡ **Messages d'erreur en Pascal**

**Ã‰tat actuel :**
```
FpDebug - MaturitÃ© :
â”œâ”€â”€ âœ… FonctionnalitÃ©s de base complÃ¨tes
â”œâ”€â”€ âœ… Support Windows/Linux/macOS
â”œâ”€â”€ âœ… IntÃ©gration Lazarus excellente
â”œâ”€â”€ âš ï¸  Quelques fonctions avancÃ©es manquantes
â””â”€â”€ ğŸš§ DÃ©veloppement trÃ¨s actif
```

### Installation de FpDebug

#### Sur Windows

FpDebug est inclus avec Lazarus ! Aucune installation supplÃ©mentaire nÃ©cessaire.

```
VÃ©rification :  
C:\lazarus\components\fpdebug\
â”œâ”€â”€ fpdebug.lpk (package)
â”œâ”€â”€ fpdbgdwarffreepascal.pas
â””â”€â”€ autres fichiers...
```

#### Sur Ubuntu/Linux

```bash
# FpDebug est inclus dans Lazarus
# Si vous avez Lazarus, vous avez FpDebug !

# VÃ©rification
ls /usr/lib/lazarus/*/components/fpdebug/
# ou
ls ~/lazarus/components/fpdebug/
```

#### Compilation depuis les sources (optionnel)

Pour avoir la derniÃ¨re version :

```bash
# Cloner Lazarus trunk
svn co https://svn.freepascal.org/svn/lazarus/trunk lazarus-trunk

# FpDebug est dans
cd lazarus-trunk/components/fpdebug

# Recompiler Lazarus avec FpDebug
make clean all
```

### Configuration de FpDebug dans Lazarus

#### Activation de FpDebug

**Menu : Outils â†’ Options â†’ DÃ©bogueur**

```
â”Œâ”€ Configuration du DÃ©bogueur â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type de dÃ©bogueur : [FpDebug (NEW)         â–¼]   â”‚
â”‚                     â”œâ”€â”€ GNU debugger (gdb)      â”‚
â”‚                     â”œâ”€â”€ FpDebug (NEW)           â”‚
â”‚                     â”œâ”€â”€ FpDebug+GDB             â”‚
â”‚                     â””â”€â”€ LLDB debugger           â”‚
â”‚                                                 â”‚
â”‚ Ã‰tat : âœ“ FpDebug intÃ©grÃ© dÃ©tectÃ©                â”‚
â”‚                                                 â”‚
â”‚ [Appliquer] [OK]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Options spÃ©cifiques FpDebug

```
Options FpDebug :
â”œâ”€â”€ GÃ©nÃ©ral
â”‚   â”œâ”€â”€ â˜‘ ArrÃªter sur exceptions Pascal
â”‚   â”œâ”€â”€ â˜‘ Ã‰valuation des propriÃ©tÃ©s
â”‚   â””â”€â”€ â˜‘ Support des threads
â”œâ”€â”€ Affichage
â”‚   â”œâ”€â”€ Longueur max chaÃ®nes : [10000]
â”‚   â”œâ”€â”€ Longueur max tableaux : [1000]
â”‚   â””â”€â”€ Profondeur max objets : [50]
â””â”€â”€ AvancÃ©
    â”œâ”€â”€ â˜ Mode verbose (debug du dÃ©bogueur)
    â””â”€â”€ â˜‘ Cache des symboles
```

### Utilisation de FpDebug

#### Interface identique Ã  GDB

La beautÃ© de FpDebug est que l'interface dans Lazarus reste identique :

```
Raccourcis identiques :
â”œâ”€â”€ F5 : Toggle breakpoint
â”œâ”€â”€ F7 : Step into
â”œâ”€â”€ F8 : Step over
â”œâ”€â”€ F9 : Run/Continue
â””â”€â”€ Ctrl+F2 : Stop
```

#### DiffÃ©rences notables avec GDB

**1. Affichage des strings Pascal**

```pascal
var
  S: string;
  AS: AnsiString;
  SS: ShortString;
```

- **GDB** : Affiche `{data = 0x1234, length = 5}`
- **FpDebug** : Affiche directement `'Hello'` âœ¨

**2. Tableaux dynamiques**

```pascal
var
  Arr: array of Integer;
```

- **GDB** : Structure complexe difficile Ã  lire
- **FpDebug** : Affiche `[1, 2, 3, 4, 5]` directement

**3. PropriÃ©tÃ©s d'objets**

```pascal
property Count: Integer read FCount;
```

- **GDB** : Ne peut pas Ã©valuer les propriÃ©tÃ©s
- **FpDebug** : Ã‰value les propriÃ©tÃ©s avec leurs getters

#### Expressions de watch amÃ©liorÃ©es

FpDebug comprend mieux les expressions Pascal :

```pascal
// Expressions supportÃ©es par FpDebug
Watch : MyObject.Items[i].SubItems[j].Text  
Watch : Length(MyArray)  
Watch : High(MyEnum)  
Watch : Assigned(MyPointer)  
Watch : MySet * [seOption1, seOption2]
```

### Avantages et limitations de FpDebug

#### Points forts

```
Avantages FpDebug :
â”œâ”€â”€ ğŸš€ Performance
â”‚   â”œâ”€â”€ DÃ©marrage 3x plus rapide
â”‚   â”œâ”€â”€ Step over instantanÃ©
â”‚   â””â”€â”€ Ã‰valuation rapide des expressions
â”œâ”€â”€ ğŸ¯ Support Pascal natif
â”‚   â”œâ”€â”€ Types Pascal compris nativement
â”‚   â”œâ”€â”€ Strings affichÃ©es correctement
â”‚   â””â”€â”€ Sets, enums, variants supportÃ©s
â”œâ”€â”€ ğŸ”§ SimplicitÃ©
â”‚   â”œâ”€â”€ Pas de configuration externe
â”‚   â”œâ”€â”€ Pas de problÃ¨mes de version
â”‚   â””â”€â”€ Messages d'erreur clairs
â””â”€â”€ ğŸ“¦ IntÃ©gration
    â”œâ”€â”€ Partie de Lazarus
    â”œâ”€â”€ Ã‰volue avec le langage
    â””â”€â”€ Support prioritaire
```

#### Limitations actuelles

```
Limitations FpDebug (2024) :
â”œâ”€â”€ âš ï¸ FonctionnalitÃ©s manquantes
â”‚   â”œâ”€â”€ Reverse debugging
â”‚   â”œâ”€â”€ Core dumps limitÃ©s
â”‚   â””â”€â”€ Remote debugging basique
â”œâ”€â”€ ğŸ“š Documentation
â”‚   â””â”€â”€ Moins de ressources que GDB
â”œâ”€â”€ ğŸ”Œ InteropÃ©rabilitÃ©
â”‚   â””â”€â”€ Code C/C++ non supportÃ©
â””â”€â”€ ğŸ› StabilitÃ©
    â””â”€â”€ Quelques bugs dans cas complexes
```

### Quand utiliser FpDebug ?

**Utilisez FpDebug si :**
- âœ… Vous dÃ©veloppez uniquement en Pascal
- âœ… Vous voulez la meilleure performance
- âœ… Vous dÃ©butez (plus simple que GDB)
- âœ… Vous avez des problÃ¨mes avec GDB

**Restez sur GDB si :**
- âŒ Vous mixez Pascal et C/C++
- âŒ Vous avez besoin de fonctions avancÃ©es
- âŒ Vous dÃ©boguez du code systÃ¨me
- âŒ Vous faites du remote debugging complexe

## LLDB : L'alternative moderne

### Qu'est-ce que LLDB ?

LLDB est le dÃ©bogueur du projet LLVM (Low Level Virtual Machine), crÃ©Ã© par Apple pour remplacer GDB sur macOS. C'est un dÃ©bogueur moderne avec une architecture modulaire et une API riche.

**CaractÃ©ristiques principales :**
- ğŸ **DÃ©bogueur par dÃ©faut sur macOS**
- âš¡ **Architecture moderne et rapide**
- ğŸ **API Python pour scripting**
- ğŸ”§ **Design modulaire et extensible**
- ğŸ“± **Support iOS/Android**

### Installation de LLDB

#### Sur Windows

LLDB sur Windows est encore expÃ©rimental :

```powershell
# Via LLVM officiel
# TÃ©lÃ©charger depuis : https://releases.llvm.org/
# Installer LLVM-<version>-win64.exe

# VÃ©rification
lldb --version
```

**âš ï¸ Note** : Support Windows limitÃ©, pas recommandÃ© pour production.

#### Sur Ubuntu/Linux

```bash
# Installation standard
sudo apt update  
sudo apt install lldb

# Version spÃ©cifique
sudo apt install lldb-14  # ou lldb-15, lldb-16

# VÃ©rification
lldb --version
# lldb version 14.0.0

# Installation complÃ¨te avec outils
sudo apt install lldb llvm clang
```

#### Sur macOS

LLDB est inclus avec Xcode :

```bash
# Si Xcode installÃ©
xcode-select --install

# VÃ©rification
lldb --version

# Via Homebrew (alternative)
brew install llvm
```

### Configuration de LLDB dans Lazarus

#### Activation de LLDB

**Menu : Outils â†’ Options â†’ DÃ©bogueur**

```
â”Œâ”€ Configuration LLDB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type de dÃ©bogueur : [LLDB debugger         â–¼]    â”‚
â”‚                                                  â”‚
â”‚ Chemin vers lldb :                               â”‚
â”‚ [/usr/bin/lldb                              ]    â”‚
â”‚ [Parcourir...]                                   â”‚
â”‚                                                  â”‚
â”‚ âš ï¸ Support LLDB expÃ©rimental                     â”‚
â”‚ Certaines fonctionnalitÃ©s peuvent ne pas         â”‚
â”‚ fonctionner correctement avec Pascal.            â”‚
â”‚                                                  â”‚
â”‚ [OK] [Annuler]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Configuration spÃ©cifique LLDB

```
Options LLDB :
â”œâ”€â”€ GÃ©nÃ©ral
â”‚   â”œâ”€â”€ â˜‘ Utiliser lldb-mi (interface MI)
â”‚   â”œâ”€â”€ Timeout : [20] secondes
â”‚   â””â”€â”€ â˜ Mode verbose
â”œâ”€â”€ Chemins
â”‚   â”œâ”€â”€ Framework dir : [/usr/lib/lldb]
â”‚   â””â”€â”€ Python dir : [/usr/lib/python3]
â””â”€â”€ CompatibilitÃ©
    â”œâ”€â”€ â˜ Mode GDB-compatible
    â””â”€â”€ â˜‘ Traduire commandes GDB
```

### Utilisation de LLDB

#### Commandes de base LLDB

LLDB utilise des commandes diffÃ©rentes de GDB :

| Action | GDB | LLDB |
|--------|-----|------|
| Lancer | `run` | `process launch` ou `run` |
| Breakpoint | `break main` | `breakpoint set --name main` |
| Continuer | `continue` | `process continue` ou `c` |
| Step over | `next` | `thread step-over` ou `n` |
| Step into | `step` | `thread step-in` ou `s` |
| Backtrace | `bt` | `thread backtrace` ou `bt` |
| Variables | `info locals` | `frame variable` |
| Quitter | `quit` | `quit` |

#### Configuration .lldbinit

CrÃ©ez `~/.lldbinit` pour personnaliser :

```python
# ~/.lldbinit
# Alias pour compatibilitÃ© GDB
command alias gdb-break breakpoint set --name  
command alias gdb-info frame variable

# Settings
settings set target.load-script-from-symbol-file true  
settings set target.max-string-summary-length 1024  
settings set target.max-memory-read-size 1024

# Format d'affichage
settings set frame-format "frame #${frame.index}: ${frame.pc}{ ${module.file.basename}`${function.name}}{ at ${line.file.fullpath}:${line.number}}\n"

# Auto-import de scripts Python
command script import ~/lldb_scripts/pascal_helpers.py
```

#### Script Python pour Pascal

CrÃ©ez `~/lldb_scripts/pascal_helpers.py` :

```python
import lldb

def pascal_string_summary(valobj, internal_dict):
    """Affiche les strings Pascal correctement"""
    try:
        length = valobj.GetChildMemberWithName('length').GetValueAsUnsigned()
        data = valobj.GetChildMemberWithName('data')
        if data.IsValid() and length > 0:
            error = lldb.SBError()
            string_data = data.GetProcess().ReadMemory(
                data.GetValueAsUnsigned(), length, error)
            if error.Success():
                return '"%s"' % string_data.decode('utf-8')
    except:
        pass
    return None

def __lldb_init_module(debugger, internal_dict):
    debugger.HandleCommand(
        'type summary add -F pascal_helpers.pascal_string_summary "^string$"'
    )
```

### Avantages et limitations de LLDB

#### Points forts

```
Avantages LLDB :
â”œâ”€â”€ ğŸ macOS
â”‚   â”œâ”€â”€ DÃ©bogueur natif
â”‚   â”œâ”€â”€ IntÃ©gration Xcode
â”‚   â””â”€â”€ Support complet
â”œâ”€â”€ âš¡ Performance
â”‚   â”œâ”€â”€ Architecture moderne
â”‚   â”œâ”€â”€ Multi-thread efficace
â”‚   â””â”€â”€ Chargement rapide
â”œâ”€â”€ ğŸ ExtensibilitÃ©
â”‚   â”œâ”€â”€ API Python complÃ¨te
â”‚   â”œâ”€â”€ Scripting puissant
â”‚   â””â”€â”€ Plugins possibles
â””â”€â”€ ğŸ”§ Architecture
    â”œâ”€â”€ Code modulaire
    â”œâ”€â”€ API stable
    â””â”€â”€ RÃ©utilisable
```

#### Limitations pour Pascal

```
Limitations LLDB avec Pascal :
â”œâ”€â”€ âŒ Support Pascal basique
â”‚   â”œâ”€â”€ Types Pascal mal compris
â”‚   â”œâ”€â”€ Strings pas affichÃ©es correctement
â”‚   â””â”€â”€ PropriÃ©tÃ©s non supportÃ©es
â”œâ”€â”€ ğŸ“š Documentation Pascal
â”‚   â””â”€â”€ Quasi inexistante
â”œâ”€â”€ ğŸªŸ Windows
â”‚   â””â”€â”€ Support expÃ©rimental
â””â”€â”€ ğŸ”Œ IntÃ©gration Lazarus
    â””â”€â”€ Basique, beaucoup de limitations
```

### Quand utiliser LLDB ?

**Utilisez LLDB si :**
- ğŸ Vous dÃ©veloppez sur macOS
- ğŸ Vous maÃ®trisez Python pour l'Ã©tendre
- âš¡ Vous avez besoin de performance maximale
- ğŸ”¬ Vous dÃ©boguez du code LLVM/Clang

**Ã‰vitez LLDB si :**
- âŒ Vous dÃ©veloppez principalement en Pascal
- âŒ Vous Ãªtes sur Windows
- âŒ Vous dÃ©butez en dÃ©bogage
- âŒ Vous avez besoin du support Pascal complet

## Comparaison dÃ©taillÃ©e

### Tableau comparatif complet

| CritÃ¨re | GDB | FpDebug | LLDB |
|---------|-----|---------|------|
| **MaturitÃ©** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |
| **Support Pascal** | â­â­â­â­ | â­â­â­â­â­ | â­â­ |
| **Performance** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| **Windows** | â­â­â­â­ | â­â­â­â­â­ | â­ |
| **Linux** | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| **macOS** | â­â­â­ | â­â­â­ | â­â­â­â­â­ |
| **Configuration** | â­â­ | â­â­â­â­â­ | â­â­â­ |
| **Documentation** | â­â­â­â­â­ | â­â­ | â­â­â­â­ |
| **FonctionnalitÃ©s** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |
| **IntÃ©gration Lazarus** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­ |

### Performance comparative

Test sur un projet de 100,000 lignes Pascal :

```
OpÃ©ration           | GDB    | FpDebug | LLDB
--------------------|--------|---------|-------
DÃ©marrage           | 3.2s   | 0.8s    | 1.5s  
Premier breakpoint  | 1.5s   | 0.3s    | 0.8s  
Step over           | 120ms  | 15ms    | 50ms
Ã‰valuation variable | 80ms   | 10ms    | 40ms
Affichage tableau   | 500ms  | 50ms    | 200ms  
Utilisation RAM     | 250MB  | 80MB    | 150MB
```

### FonctionnalitÃ©s supportÃ©es

```
FonctionnalitÃ©         | GDB | FpDebug | LLDB
-----------------------|-----|---------|------
Breakpoints            | âœ…  | âœ…      | âœ…  
Conditional breaks     | âœ…  | âœ…      | âœ…  
Watchpoints           | âœ…  | âš ï¸      | âœ…  
Step in/over/out      | âœ…  | âœ…      | âœ…  
Variables locales     | âœ…  | âœ…      | âœ…  
Expressions Pascal    | âš ï¸  | âœ…      | âŒ  
PropriÃ©tÃ©s objets     | âŒ  | âœ…      | âŒ  
Threads               | âœ…  | âœ…      | âœ…  
Remote debugging      | âœ…  | âš ï¸      | âœ…  
Core dumps            | âœ…  | âš ï¸      | âœ…  
Reverse debugging     | âœ…  | âŒ      | âš ï¸  
Scripts/Automation    | âœ…  | âŒ      | âœ…
```

## Migration entre dÃ©bogueurs

### De GDB vers FpDebug

**Migration simple :**
1. Outils â†’ Options â†’ DÃ©bogueur
2. Changer le type vers FpDebug
3. Aucune autre modification nÃ©cessaire !

**Points d'attention :**
```
VÃ©rifications post-migration :
â˜ Tester tous les breakpoints
â˜ VÃ©rifier l'affichage des strings
â˜ Tester l'Ã©valuation d'expressions
â˜ VÃ©rifier le dÃ©bogage multi-thread
```

### De GDB vers LLDB

**Migration plus complexe :**

1. **Installer LLDB**
2. **Configurer dans Lazarus**
3. **Adapter les commandes personnalisÃ©es**

```bash
# Convertir .gdbinit en .lldbinit
# GDB:
break main  
run  
print myvar

# LLDB:
breakpoint set --name main  
process launch  
frame variable myvar
```

4. **Tester intensivement** (support Pascal limitÃ©)

## Autres alternatives

### DÃ©bogueurs commerciaux

```
Alternatives commerciales :
â”œâ”€â”€ Intel VTune Profiler
â”‚   â”œâ”€â”€ Excellent pour optimisation
â”‚   â””â”€â”€ Cher, complexe
â”œâ”€â”€ TotalView
â”‚   â”œâ”€â”€ DÃ©bogage parallÃ¨le/HPC
â”‚   â””â”€â”€ TrÃ¨s cher
â””â”€â”€ Windows : WinDbg
    â”œâ”€â”€ DÃ©bogueur systÃ¨me Microsoft
    â””â”€â”€ Gratuit, puissant, complexe
```

### DÃ©bogueurs spÃ©cialisÃ©s

```
DÃ©bogueurs spÃ©cialisÃ©s :
â”œâ”€â”€ Valgrind (Linux)
â”‚   â”œâ”€â”€ Fuites mÃ©moire
â”‚   â””â”€â”€ Pas un vrai dÃ©bogueur
â”œâ”€â”€ rr (Record & Replay)
â”‚   â”œâ”€â”€ Enregistre l'exÃ©cution
â”‚   â””â”€â”€ Linux uniquement
â””â”€â”€ UDB (Undo Debugger)
    â”œâ”€â”€ Time-travel debugging
    â””â”€â”€ Commercial
```

## Configuration hybride

### FpDebug + GDB

Lazarus permet d'utiliser FpDebug avec GDB comme backend :

```
Configuration hybride :
â”œâ”€â”€ Type : FpDebug+GDB
â”œâ”€â”€ Avantages :
â”‚   â”œâ”€â”€ Interface FpDebug (rapide)
â”‚   â”œâ”€â”€ Backend GDB (complet)
â”‚   â””â”€â”€ Meilleur des deux mondes
â””â”€â”€ InconvÃ©nients :
    â”œâ”€â”€ Plus complexe
    â””â”€â”€ Peut avoir des bugs
```

**Configuration :**
```
Outils â†’ Options â†’ DÃ©bogueur  
Type : [FpDebug + GDB        â–¼]

Options :
â”œâ”€â”€ â˜‘ Utiliser FpDebug pour l'interface
â”œâ”€â”€ â˜‘ GDB pour les fonctions avancÃ©es
â””â”€â”€ â˜‘ Fallback automatique sur GDB
```

## Guide de dÃ©cision

### Arbre de dÃ©cision

```
Quel dÃ©bogueur choisir ?
â”‚
â”œâ”€â”€ DÃ©veloppement Pascal uniquement ?
â”‚   â”œâ”€â”€ Oui â†’ FpDebug (rapide, simple)
â”‚   â””â”€â”€ Non â†’ GDB (universel)
â”‚
â”œâ”€â”€ Sur macOS principalement ?
â”‚   â”œâ”€â”€ Oui â†’ LLDB (natif)
â”‚   â””â”€â”€ Non â†’ Continuer
â”‚
â”œâ”€â”€ Besoin de fonctions avancÃ©es ?
â”‚   â”œâ”€â”€ Remote debug â†’ GDB
â”‚   â”œâ”€â”€ Core dumps â†’ GDB
â”‚   â”œâ”€â”€ Reverse debug â†’ GDB
â”‚   â””â”€â”€ Non â†’ FpDebug
â”‚
â”œâ”€â”€ DÃ©butant ?
â”‚   â”œâ”€â”€ Oui â†’ FpDebug (plus simple)
â”‚   â””â”€â”€ Non â†’ Au choix
â”‚
â””â”€â”€ Performance critique ?
    â”œâ”€â”€ Oui â†’ FpDebug
    â””â”€â”€ Non â†’ GDB (plus de fonctions)
```

### Recommandations par profil

#### DÃ©butant en Pascal

```
Configuration recommandÃ©e :
â”œâ”€â”€ DÃ©bogueur : FpDebug
â”œâ”€â”€ Raisons :
â”‚   â”œâ”€â”€ Configuration zÃ©ro
â”‚   â”œâ”€â”€ Messages clairs
â”‚   â””â”€â”€ Rapide
â””â”€â”€ Limitation acceptable :
    â””â”€â”€ Fonctions avancÃ©es non nÃ©cessaires
```

#### DÃ©veloppeur expÃ©rimentÃ©

```
Configuration recommandÃ©e :
â”œâ”€â”€ Principal : GDB
â”œâ”€â”€ Secondaire : FpDebug pour tests rapides
â”œâ”€â”€ Raisons :
â”‚   â”œâ”€â”€ Toutes fonctionnalitÃ©s
â”‚   â”œâ”€â”€ Documentation complÃ¨te
â”‚   â””â”€â”€ Scriptable
```

#### DÃ©veloppeur macOS

```
Configuration recommandÃ©e :
â”œâ”€â”€ DÃ©bogueur : LLDB
â”œâ”€â”€ Fallback : FpDebug
â”œâ”€â”€ Raisons :
â”‚   â”œâ”€â”€ LLDB natif sur macOS
â”‚   â””â”€â”€ Meilleure intÃ©gration systÃ¨me
```

## Configuration multi-dÃ©bogueur

### Profils de dÃ©bogueur

CrÃ©ez diffÃ©rents modes de build avec diffÃ©rents dÃ©bogueurs :

```
Projet â†’ Options â†’ Modes de compilation
â”œâ”€â”€ Debug-FpDebug
â”‚   â””â”€â”€ DÃ©bogueur : FpDebug
â”œâ”€â”€ Debug-GDB
â”‚   â””â”€â”€ DÃ©bogueur : GDB
â””â”€â”€ Debug-LLDB
    â””â”€â”€ DÃ©bogueur : LLDB
```

### Scripts de basculement

#### Windows (batch)

```batch
@echo off
REM switch_debugger.bat

echo SÃ©lectionnez le dÃ©bogueur :  
echo 1. FpDebug (rapide)  
echo 2. GDB (complet)  
echo 3. LLDB (expÃ©rimental)

set /p choice=Votre choix :

if %choice%==1 (
    lazarus --set-debugger=fpdebug
) else if %choice%==2 (
    lazarus --set-debugger=gdb
) else if %choice%==3 (
    lazarus --set-debugger=lldb
)
```

#### Linux (bash)

```bash
#!/bin/bash
# switch_debugger.sh

echo "SÃ©lectionnez le dÃ©bogueur :"  
select debugger in "FpDebug" "GDB" "LLDB" "Quit"; do
    case $debugger in
        FpDebug)
            lazarus --primary-config-path=~/.lazarus-fpdebug
            break;;
        GDB)
            lazarus --primary-config-path=~/.lazarus-gdb
            break;;
        LLDB)
            lazarus --primary-config-path=~/.lazarus-lldb
            break;;
        Quit)
            exit;;
    esac
done
```

## DÃ©pannage des alternatives

### FpDebug ne fonctionne pas

**SymptÃ´mes et solutions :**

```
ProblÃ¨me : "FpDebug not available"
â”œâ”€â”€ VÃ©rifier le package fpdebug installÃ©
â”œâ”€â”€ Recompiler Lazarus
â””â”€â”€ VÃ©rifier la version (>= 2.0 requis)

ProblÃ¨me : Variables non affichÃ©es
â”œâ”€â”€ VÃ©rifier symboles debug (-g)
â”œâ”€â”€ DÃ©sactiver optimisations (-O-)
â””â”€â”€ Mode Debug activÃ©

ProblÃ¨me : Crash au dÃ©marrage
â”œâ”€â”€ Conflit avec antivirus
â”œâ”€â”€ Permissions insuffisantes
â””â”€â”€ Corrompre â†’ rÃ©installer
```

### LLDB ne trouve pas les symboles

**Solutions :**

```bash
# VÃ©rifier le format des symboles
file ./mon_programme
# Doit montrer : DWARF

# Forcer DWARF dans Lazarus
Projet â†’ Options â†’ Debugging
â””â”€â”€ Type : Dwarf (-gw)

# Dans LLDB
(lldb) settings set target.source-map /build/path /actual/path
```

## Tests de validation

### Test FpDebug

```pascal
program TestFpDebug;
{$mode objfpc}{$H+}

uses SysUtils, Classes;

type
  TPerson = class
  private
    FName: string;
    FAge: Integer;
  public
    property Name: string read FName write FName;
    property Age: Integer read FAge write FAge;
  end;

var
  Person: TPerson;
  List: TStringList;
  Arr: array of Integer;
  S: string;

begin
  // Test strings
  S := 'Test FpDebug';
  WriteLn(S);  // Breakpoint ici - vÃ©rifier affichage string

  // Test objets et propriÃ©tÃ©s
  Person := TPerson.Create;
  Person.Name := 'Alice';
  Person.Age := 25;  // VÃ©rifier propriÃ©tÃ©s

  // Test tableaux dynamiques
  SetLength(Arr, 5);
  Arr[0] := 10;  // VÃ©rifier affichage tableau

  // Test collections
  List := TStringList.Create;
  List.Add('Item 1');

  WriteLn('Tests terminÃ©s');

  List.Free;
  Person.Free;
end.
```

### Test LLDB

```pascal
program TestLLDB;
{$mode objfpc}{$H+}

begin
  WriteLn('Test LLDB - Point 1');  // break 1
  WriteLn('Test LLDB - Point 2');  // break 2
  WriteLn('Test LLDB - Point 3');  // break 3
end.
```

Commands LLDB :
```bash
lldb ./TestLLDB
(lldb) b TestLLDB.pas:5
(lldb) run
(lldb) continue
(lldb) quit
```

## Conclusion

Le choix du dÃ©bogueur dÃ©pend de vos besoins spÃ©cifiques :

**FpDebug** est l'avenir du dÃ©bogage Pascal :
- ğŸš€ Plus rapide
- ğŸ¯ ConÃ§u pour Pascal
- ğŸ”§ Simple Ã  utiliser
- ğŸ“ˆ En amÃ©lioration constante

**GDB** reste le choix sÃ»r :
- ğŸ›ï¸ Mature et stable
- ğŸ“š Documentation complÃ¨te
- ğŸ”§ Toutes fonctionnalitÃ©s
- ğŸŒ Universel

**LLDB** pour cas spÃ©cifiques :
- ğŸ DÃ©veloppement macOS
- ğŸ Si vous maÃ®trisez Python
- ğŸ”¬ Projets LLVM/Clang

**Recommandation finale :**
> Commencez avec FpDebug pour sa simplicitÃ© et sa vitesse. Si vous rencontrez des limitations, basculez sur GDB. Gardez LLDB pour macOS ou besoins spÃ©cifiques.

L'avantage de Lazarus est de pouvoir changer de dÃ©bogueur facilement, permettant d'utiliser le meilleur outil pour chaque situation.

â­ï¸ [IntÃ©gration avec les systÃ¨mes de contrÃ´le de version](/02-maitrise-ide-lazarus/06-integration-controle-version.md)
